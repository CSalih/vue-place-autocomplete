function camelCase(e){return(e=e.toLowerCase().replace(/(?:(^.)|([-_\s]+.))/g,function(e){return e.charAt(e.length-1).toUpperCase()})).charAt(0).toLowerCase()+e.substring(1)}function extend(...e){return Object.assign(...e)}function isNull(e){return null===e}function isArray(e){return Array.isArray(e)}function isObject(e){return"object"==typeof e&&!isNull(e)&&!isArray(e)}function isNumber(e){return"number"==typeof e||!!e&&"[object Number]"===e.toString()}function isNumeric(e){return isNumber(e)||!!e&&!!e.toString().match(/^-?[\d.,]+$/)}function key(e){return isNumeric(e)?parseFloat(e):e}function each(e,t){for(const n in e)t(e[n],key(n))}function matches(e){return t=>{for(const n in e){if(isObject(e[n]))return!!t[n]&&matches(e[n])(t[n]);if(!t||t[n]!==e[n])return!1}return!0}}function isString(e){return"string"==typeof e}function get(e,t){return(isString(t)?t.split("."):isArray(t)?t:[t]).reduce((e,t)=>e[t],e)}function property(e){return t=>get(t,e)}function isFunction(e){return e instanceof Function}function matchesProperty(e,t){return n=>get(n,e)===t}function predicate(e){return isObject(e)?e=matches(e):isArray(e)?e=matchesProperty(e[0],e[1]):isFunction(e)||(e=property(e)),e}function isBoolean(e){return!0===e||!1===e}function isUndefined(e){return void 0===e}function kebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").replace(/_/g,"-").toLowerCase()}function mapKeys(e,t){const n={};return each(e,(e,i)=>{n[t(e,i)]=e}),n}function negate(e){return(...t)=>isFunction(e)?!e(...t):!e}function pickBy(e,t){const n={};return each(e,(e,i)=>{predicate(t)(e)&&(n[i]=e)}),n}function omitBy(e,t){return pickBy(e,negate(t))}function intersection(e,t){return e.filter(function(e){return-1!==t.indexOf(e)}).filter(function(e,t,n){return n.indexOf(e)===t})}function extract(e,t,n){if(n[e])return n[e];if("latitude"===e)return n.geometry.location.lat();if("longitude"===e)return n.geometry.location.lng();var i=ALIASES[e]||(isArray(e)?e:[e]),r=n.address_components.map(function(e){if(intersection(e.types,i).length)return e[t.short?"short_name":"long_name"]}).filter(function(e){return!!e});return r.length?r.join(" "):null}function update(e,t,n){var i=e.expression.split("."),r=i.pop(),o=i.reduce(function(e,t){return e[t]},t.context);return n=isArray(n)?n.join(" "):n,e.modifiers.query&&(t.componentInstance.query=n),o[r]=n,n}function geocode(e){var t=new window.google.maps.Geocoder;return new Promise(function(n,i){e.geometry?n([e]):t.geocode(e,function(e,t){t===window.google.maps.GeocoderStatus.OK?n(e):i(t)})})}function element(e){const t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("type","text/javascript"),t.setAttribute("charset","utf-8"),t}function append(e){return document.querySelector("head")?document.querySelector("head").appendChild(e):document.querySelector("body").appendChild(e),e}function script(e){return LOADED_SCRIPTS[e]instanceof Promise?LOADED_SCRIPTS[e]:LOADED_SCRIPTS[e]||document.querySelector(`script[src="${e}"]`)?new Promise((t,n)=>{t(LOADED_SCRIPTS[e])}):(LOADED_SCRIPTS[e]=new Promise((t,n)=>{try{append(element(e)).addEventListener("load",n=>{t(LOADED_SCRIPTS[e]=n)})}catch(e){n(e)}}),LOADED_SCRIPTS[e])}function prefix(e,t,n="-"){const i=(e,i)=>{const r=(i||e).replace(new RegExp(`^${t}${n}?`),"");return[t,r].filter(e=>!!e).join(n)};return isBoolean(e)?e:isObject(e)?mapKeys(e,i):i(e)}function use(e){return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e}function plugin(e,t,n){VueInstaller.$plugins[t]||e.use(VueInstaller.$plugins[t]=n)}function plugins(e,t){each(t,(t,n)=>{plugin(e,n,t)})}function filter(e,t,n){VueInstaller.$filters[t]||e.use(VueInstaller.$filters[t]=n)}function filters(e,t){each(t,(t,n)=>{filter(e,n,t)})}function component(e,t,n){VueInstaller.$components[t]||e.component(t,VueInstaller.$components[t]=n)}function components(e,t){each(t,(t,n)=>{component(e,n,t)})}function directive(e,t,n){VueInstaller.$directives[t]||(isFunction(n)?e.use(VueInstaller.$directives[t]=n):e.directive(t,n))}function directives(e,t){each(t,(t,n)=>{directive(e,n,t)})}function classes(e,t){return COLORS.map(n=>e[camelCase(n=prefix(n,t))]?n:null).filter(e=>!!e)}function unit(e){return isFinite(e)?e+"px":e}function install(e,t){e.directive("place-autofill",PlaceAutofill),e.component("place-autocomplete-field",PlaceAutocompleteField),e.component("place-autocomplete-list",PlaceAutocompleteList),e.component("place-autocomplete-list-item",PlaceAutocompleteListItem)}var ALIASES={street:["street_number","route","intersection"],city:["locality"],state:["administrative_area_level_1"],zip:["postal_code"],zipcode:["postal_code"],county:["administrative_area_level_2"]},PlaceAutofill={bind:function(e,t,n){n.componentInstance.$on("select",function(e,i){n.context.$nextTick(function(){update(t,n,extract(t.arg,t.modifiers,i))})})}};const LOADED_SCRIPTS={};var PlaceAutocompleteListItem={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"autocomplete-list-item",on:{focus:e.onFocus,onBlur:e.onBlur}},[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClick(t)},focus:e.onFocus,blur:e.onBlur}},[n("span",{staticClass:"autocomplete-list-item-icon"}),e._v(" "),n("span",{staticClass:"autocomplete-list-item-label"},[e._t("default")],2)])])},staticRenderFns:[],name:"place-autocomplete-list-item",props:{item:Object},methods:{onBlur(e){this.$emit("blur",e,this)},onClick(e){this.$emit("click",e,this)},onFocus(e){this.$emit("focus",e,this)}}},PlaceAutocompleteList={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete-list-wrapper"},[n("ul",{staticClass:"autocomplete-list"},e._l(e.items,function(t,i){return n("place-autocomplete-list-item",{key:t.id,attrs:{item:t},on:{click:e.onClick,focus:e.onFocus,blur:e.onBlur}},[e._v(" "+e._s(t[e.display])+" ")])}))])},staticRenderFns:[],name:"place-autocomplete-list",components:{PlaceAutocompleteListItem:PlaceAutocompleteListItem},props:{items:{type:Array,default:()=>[]},display:{type:String,default:"description"}},methods:{onBlur(e,t){this.$emit("item:blur",e,t)},onFocus(e,t){this.$emit("item:focus",e,t)},onClick(e,t){this.$emit("item:click",e,t)}}},FormControl={props:{autocomplete:String,id:[Number,String],label:[Number,String],name:String,value:{default:null},placeholder:String,required:Boolean,group:{type:Boolean,value:!0},pattern:String,error:String,errors:{type:Object,default(){return{}}},feedback:[String,Array],bindEvents:{type:Array,default(){return["focus","blur","change","click","keyup","keydown","progress","paste"]}},defaultControlClass:{type:String,default:"form-control"},hideLabel:Boolean,spacing:String,size:{type:String,default:"md",validate:e=>-1!==["sm","md","lg"].indexOf(e)},inline:Boolean,plaintext:Boolean,readonly:Boolean,disabled:Boolean,helpText:[Number,String],maxlength:[Number,String]},directives:{bindEvents:{bind(e,t,n){each(t.value||n.context.bindEvents,t=>{e.addEventListener(t,e=>{n.context.$emit(t,e)})})}}},methods:{blur(){this.getInputField()&&this.getInputField().blur()},focus(){this.getInputField()&&this.getInputField().focus()},getInputField(){return this.$el.querySelector(".form-control, input, select, textarea")},getFieldErrors(){let e=this.error||this.errors;return isObject(this.errors)&&(e=this.errors[this.name||this.id]),!e||isArray(e)||isObject(e)?e:[e]}},computed:{callbacks(){return this.bindEvents.map(e=>({name:e,callback:this[camelCase(["on",e].join(" "))]})).filter(e=>!isUndefined(e.callback))},invalidFeedback(){if(this.error)return this.error;const e=this.getFieldErrors();return isArray(e)?e.join("<br>"):e},validFeedback(){return isArray(this.feedback)?this.feedback.join("<br>"):this.feedback},controlClass(){return this.defaultControlClass+(this.plaintext?"-plaintext":"")},controlSizeClass(){return prefix(this.size,this.controlClass)},controlClasses(){return[this.controlClass,this.controlSizeClass,this.spacing||"",this.invalidFeedback?"is-invalid":""].join(" ")},hasDefaultSlot(){return!!this.$slots.default}}},FormGroup={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"form-group"},[e._t("default")],2)},staticRenderFns:[],name:"form-group"};const VueInstaller={use:use,script:script,plugin:plugin,plugins:plugins,filter:filter,filters:filters,component:component,components:components,directive:directive,directives:directives,$plugins:{},$filters:{},$directives:{},$components:{}};VueInstaller.use({install(e,t){VueInstaller.components({FormGroup:FormGroup})}});const COLORS=["primary","secondary","success","danger","warning","info","light","dark","white","muted"],props={};each(["border","text","bg","bg-gradient"],e=>{each(COLORS,t=>{props[camelCase(prefix(t,e))]=Boolean})});var Colorable={props:props,methods:{textColor(){return classes(this,"text")},bgColor(){return classes(this,"bg")},borderColor(){return classes(this,"border")},bgGradientColor(){return classes(this,"bg-gradient")}},computed:{textColorClasses(){return this.textColor().join(" ").trim()||null},borderColorClasses(){return this.borderColor().join(" ").trim()||null},bgColorClasses(){return this.bgColor().join(" ").trim()||null},bgGradientColorClasses(){return this.bgGradientColor().join(" ").trim()||null},colorableClasses(){const e={};return e[this.textColorClasses]=!!this.textColorClasses,e[this.borderColorClasses]=!!this.borderColorClasses,e[this.bgColorClasses]=!!this.bgColorClasses,e[this.bgGradientColorClasses]=!!this.bgGradientColorClasses,omitBy(e,(e,t)=>!e||!t)}}},Screenreaders={props:{srOnly:Boolean,srOnlyFocusable:Boolean},computed:{screenreaderClasses(){return{"sr-only":this.srOnly,"sr-only-focusable":this.srOnlyFocusable}}}},HelpText={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("small",{staticClass:"form-text",class:e.classes},[e._t("default")],2)},staticRenderFns:[],name:"help-text",mixins:[Colorable,Screenreaders],computed:{classes(){return extend({},this.screenreaderClasses,this.colorableClasses)}}};VueInstaller.use({install(e,t){VueInstaller.components({HelpText:HelpText})}});var FormLabel={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("label",{class:e.classes},[e._t("default")],2)},staticRenderFns:[],name:"form-label",mixins:[Colorable,Screenreaders],computed:{classes(){return extend({},this.screenreaderClasses,this.colorableClasses)}}};VueInstaller.use({install(e,t){VueInstaller.components({FormLabel:FormLabel})}});var FormFeedback={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:{"invalid-feedback":e.invalid,"valid-feedback":e.valid&&!e.invalid}},[e._t("default",[e._v(e._s(e.label))])],2)},staticRenderFns:[],name:"form-feedback",mixins:[Colorable],props:{label:String,invalid:Boolean,valid:Boolean}};VueInstaller.use({install(e,t){VueInstaller.components({FormFeedback:FormFeedback})}});var MergeClasses={methods:{mergeClasses(){let e={};return each([].slice.call(arguments),t=>{isObject(t)?extend(e,t):isArray(t)?e=e.concat(t):t&&(e[t]=!0)}),e}}},BaseType={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activity-indicator",class:e.classes},e._l(e.nodes,function(e){return n("div")}))},staticRenderFns:[],props:{nodes:{type:Number,default:3},size:{type:String,default:""},prefix:{type:String,default:"activity-indicator-"}},computed:{classes:function(){const e={};return e[this.$options.name]=!!this.$options.name,e[this.prefix+this.size.replace(this.prefix,"")]=!!this.size,e}}},ActivityIndicatorDots={name:"activity-indicator-dots",extends:BaseType},ActivityIndicatorSpinner={name:"activity-indicator-spinner",extends:BaseType,props:extend({},BaseType.props,{nodes:{type:Number,default:12}})},ActivityIndicator={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.center?n("div",{staticClass:"center-wrapper",class:{"position-relative":e.relative,"position-fixed":e.fixed},style:e.style},[n("div",{staticClass:"center-content d-flex flex-column align-items-center"},[n(e.component,{tag:"component",attrs:{size:e.size,prefix:e.prefix}}),e._v(" "),e.label?n("div",{staticClass:"activity-indicator-label",domProps:{innerHTML:e._s(e.label)}}):e._e()],1)]):n("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",style:e.style},[n(e.component,{tag:"component",attrs:{size:e.size,prefix:e.prefix}}),e._v(" "),e.label?n("div",{staticClass:"activity-indicator-label",domProps:{innerHTML:e._s(e.label)}}):e._e()],1)},staticRenderFns:[],name:"activity-indicator",extends:BaseType,props:{center:Boolean,fixed:Boolean,label:String,relative:Boolean,type:{type:String,default:"dots"},height:[String,Number],maxHeight:[String,Number],minHeight:[String,Number],width:[String,Number],maxWidth:[String,Number],minWidth:[String,Number]},components:{ActivityIndicatorDots:ActivityIndicatorDots,ActivityIndicatorSpinner:ActivityIndicatorSpinner},computed:{style(){return{width:unit(this.width),maxWidth:unit(this.maxWidth),minWidth:unit(this.minWidth),height:unit(this.height),maxHeight:unit(this.maxHeight),minHeight:unit(this.minHeight)}},component(){return kebabCase(this.prefix+this.type.replace(this.prefix,""))}}};VueInstaller.use({install(e,t){VueInstaller.components({ActivityIndicator:ActivityIndicator})}});var InputField={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form-group",{staticClass:"input-field",class:{"has-activity":e.activity}},[e._t("label",[e.label||e.hasDefaultSlot?n("form-label",{ref:"label",attrs:{for:e.id},domProps:{innerHTML:e._s(e.label)}}):e._e()]),e._v(" "),n("div",{staticClass:"position-relative"},[e._t("control",[n("input",{directives:[{name:"bind-events",rawName:"v-bind-events",value:e.bindEvents,expression:"bindEvents"}],ref:"control",class:e.mergeClasses(e.controlClasses,e.colorableClasses),attrs:{id:e.id,type:e.type,name:e.name,pattern:e.pattern,readonly:e.readonly,required:e.required,maxlength:e.maxlength,placeholder:e.placeholder,disabled:e.disabled||e.readonly,"aria-label":e.label,"aria-describedby":e.id,autocomplete:e.autocomplete},domProps:{value:e.value},on:{input:function(t){e.$emit("input",t.target.value)}}})]),e._v(" "),e._t("activity",[n("transition",{attrs:{name:"slide-fade"}},[e.activity?n("activity-indicator",{key:"test",ref:"activity",attrs:{type:"dots",size:e.size}}):e._e()],1)]),e._v(" "),e._t("feedback",[e.validFeedback?n("form-feedback",{ref:"feedback",attrs:{valid:""},domProps:{innerHTML:e._s(e.validFeedback)}}):e.invalidFeedback?n("form-feedback",{ref:"feedback",attrs:{invalid:""},domProps:{innerHTML:e._s(e.invalidFeedback)}}):e._e()])],2),e._v(" "),e._t("help",[e.helpText?n("help-text",{ref:"help",domProps:{innerHTML:e._s(e.helpText)}}):e._e()])],2)},staticRenderFns:[],name:"input-field",mixins:[Colorable,FormControl,MergeClasses],components:{HelpText:HelpText,FormGroup:FormGroup,FormLabel:FormLabel,FormFeedback:FormFeedback,ActivityIndicator:ActivityIndicator},props:{activity:{type:Boolean,default:!1},type:{type:String,default:"text"}}};VueInstaller.use({install(e,t){VueInstaller.components({InputField:InputField})}});const KEYCODE={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,TAB:9},API_REQUEST_OPTIONS=["bounds","location","component-restrictions","offset","radius","types"];var PlaceAutocompleteField={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete-field",on:{keydown:e.onKeydown,keyup:e.onKeyup}},[n("input-field",{attrs:{name:e.name,id:e.id,type:e.type,placeholder:e.placeholder,required:e.required,disabled:e.disabled||e.readonly,readonly:e.readonly,pattern:e.pattern,"aria-label":e.label,"aria-describedby":e.id,label:e.label,errors:e.errors,value:e.value,autocomplete:"no"},on:{input:function(t){e.$emit("input",e.query)},focus:e.onFocus,blur:e.onBlur},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[e.activity?n("activity-indicator",{attrs:{size:"xs",type:"spinner"}}):e._e()],1),e._v(" "),e.predictions&&e.showPredictions?n("place-autocomplete-list",{attrs:{items:e.predictions},on:{"item:click":e.onItemClick,"item:blur":e.onItemBlur}}):e._e()],1)},staticRenderFns:[],name:"place-autocomplete-field",mixins:[FormControl],components:{FormGroup:FormGroup,InputField:InputField,ActivityIndicator:ActivityIndicator,PlaceAutocompleteList:PlaceAutocompleteList},props:{"api-key":{type:String,required:!0},"base-uri":{type:String,default:"https://maps.googleapis.com/maps/api/js"},libraries:{type:Array,default(){return["geometry","places"]}},bounds:{type:[Boolean,Object,String],default:!1},location:{type:[Boolean,Object,String],default:!1},"component-restrictions":{type:[Boolean,Object,String],default:!1},offset:{type:Boolean,default:!1},radius:{type:Boolean,default:!1},types:{type:[Boolean,Array],default:!1}},methods:{getInputElement(){return this.$el.querySelector("input")},getRequestOptions(){const e={input:this.getInputElement().value};for(let t in API_REQUEST_OPTIONS)void 0===this[t]&&null===this[t]||(e[t]=this[t]);return e},select(e){geocode({placeId:e.place_id}).then(t=>{this.hide();this.$emit("input",this.query=t[0].formatted_address);this.$emit("select",e,t[0])})},search(){return new Promise((e,t)=>{this.getInputElement().value?(this.activity=!0,this.$service.getPlacePredictions(this.getRequestOptions(),(n,i)=>{this.activity=!1;switch(i){case window.google.maps.places.PlacesServiceStatus.OK:e(n);break;default:t(new Error(`Error with status: ${i}`))}})):(this.predictions=!1,this.showPredictions=!1)})},hide(){this.showPredictions=!1},show(){this.showPredictions=!0},up(){const e=this.$el.querySelector("a:focus");if(e&&e.parentElement.previousElementSibling)e.parentElement.previousElementSibling.querySelector("a").focus();else{const e=this.$el.querySelectorAll("a");e[e.length-1].focus()}},down(){const e=this.$el.querySelector("a:focus");e&&e.parentElement.nextElementSibling?e.parentElement.nextElementSibling.querySelector("a").focus():this.$el.querySelector("a").focus()},onKeydown(e){const t=this.$el.querySelector("[tabindex]");t&&e.keyCode===KEYCODE.TAB&&e.preventDefault()&&t.focus()},onKeyup(e){switch(e.keyCode){case KEYCODE.ENTER:case KEYCODE.SPACE:return void(this.$el.querySelector(".is-focused")&&this.$el.querySelector(".is-focused a").dispatchEvent(new Event("mousedown")));case KEYCODE.ESC:return this.hide(),void this.getInputElement().blur();case KEYCODE.UP:return this.up(),void e.preventDefault();case KEYCODE.DOWN:return this.down(),void e.preventDefault()}this.search().then(e=>{this.predictions=e;this.showPredictions=!0},e=>{e&&(this.predictions=!1)})},onFocus(e){this.query&&(this.predictions.length||this.onKeyup(e),this.show())},onBlur(e){this.$el.contains(e.relatedTarget)||this.hide()},onItemBlur(e){this.onBlur(e)},onItemClick(e,t){this.select(t.item),this.predictions=!1}},mounted(){script(`${this.baseUri}?key=${this.apiKey}&libraries=${this.libraries.join(",")}`).then(()=>{this.$geocoder=new window.google.maps.Geocoder;this.$service=new window.google.maps.places.AutocompleteService;this.loaded=!0;this.$emit("loaded")})},data(){return{query:this.value,activity:!1,loaded:!1,predictions:!1,showPredictions:!1}}};window&&window.Vue&&window.Vue.use(install);export default install;export{PlaceAutofill,PlaceAutocompleteField,PlaceAutocompleteList,PlaceAutocompleteListItem};
//# sourceMappingURL=vue-place-autocomplete.es.min.js.map
