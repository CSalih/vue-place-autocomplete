!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.VuePlaceAutocomplete={})}(this,function(t){"use strict";function e(...t){return Object.assign(...t)}function i(t){return null===t}function n(t){return Array.isArray(t)}function o(t){return"object"==typeof t&&!i(t)&&!n(t)}function r(t){return"number"==typeof t||!!t&&"[object Number]"===t.toString()}function s(t){return r(t)||!!t&&!n(t)&&!!t.toString().match(/^-?[\d.,]+$/)}function a(t){return s(t)?parseFloat(t):t}function c(t,e){for(const i in t)e(t[i],a(i))}function l(t){return!0===t||!1===t}function u(t){return void 0===t}function d(t){return n(t)?0===t.length:o(t)?0===Object.keys(t).length:""===t||i(t)||u(t)}function f(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").replace(/_/g,"-").toLowerCase()}function p(t,e){const i={};return c(t,(t,n)=>{i[e(t,n)]=t}),i}function m(t,e){return t.filter(function(t){return-1!==e.indexOf(t)}).filter(function(t,e,i){return i.indexOf(t)===e})}function v(t,e,i){if(i[t])return i[t];if("latitude"===t)return i.geometry.location.lat();if("longitude"===t)return i.geometry.location.lng();var o=F[t]||(n(t)?t:[t]),r=i.address_components.map(function(t){if(m(t.types,o).length)return t[e.short?"short_name":"long_name"]}).filter(function(t){return!!t});return r.length?r.join(" "):null}function h(t,e,i){var o=t.expression.split("."),r=o.pop(),s=o.reduce(function(t,e){return t[e]},e.context);return i=n(i)?i.join(" "):i,t.modifiers.query&&(e.componentInstance.query=i),s[r]=i,i}function y(t){var e=new window.google.maps.Geocoder;return new Promise(function(i,n){t.geometry?i([t]):e.geocode(t,function(t,e){e===window.google.maps.GeocoderStatus.OK?i(t):n(e)})})}function b(t){const e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("type","text/javascript"),e.setAttribute("charset","utf-8"),e}function g(t){return document.querySelector("head")?document.querySelector("head").appendChild(t):document.querySelector("body").appendChild(t),t}function _(t){return A[t]instanceof Promise?A[t]:A[t]||document.querySelector(`script[src="${t}"]`)?new Promise((e,i)=>{e(A[t])}):(A[t]=new Promise((e,i)=>{try{g(b(t)).addEventListener("load",i=>{e(A[t]=i)})}catch(t){i(t)}}),A[t])}function S(t,e,i,n,o,r,s,a,c,l){"function"==typeof s&&(c=a,a=s,s=!1);const u="function"==typeof i?i.options:i;t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),n&&(u._scopeId=n);let d;if(r?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=d):e&&(d=s?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),d)if(u.functional){const t=u.render;u.render=function(e,i){return d.call(i),t(e,i)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return i}function x(t,e,i="-"){const n=(t,n)=>{const o=(n||t).replace(new RegExp(`^${e}${i}?`),"");return[e,o].filter(t=>!!t).join(i)};return l(t)?t:o(t)?p(t,n):n(t)}function w(t,e,i){e.context.$el.classList.add(i)}function $(t,e,i){e.context.$el.classList.remove(i)}function C(t,e){(d(t.value)||"SELECT"===t.tagName&&-1===t.selectedIndex)&&w(t,e,z)}function E(t){return isFinite(t)?t+"px":t}function k(t,e){t.directive("place-autofill",B),t.component("place-autocomplete-field",kt),t.component("place-autocomplete-list",N),t.component("place-autocomplete-list-item",L)}var F={street:["street_number","route","intersection"],city:["locality"],state:["administrative_area_level_1"],zip:["postal_code"],zipcode:["postal_code"],county:["administrative_area_level_2"]},B={bind:function(t,e,i){i.componentInstance.$on("select",function(t,n){i.context.$nextTick(function(){h(e,i,v(e.arg,e.modifiers,n))})})}};const A={},P={name:"place-autocomplete-list-item",props:{item:Object},methods:{onBlur:function(t){this.$emit("blur",t,this)},onClick:function(t){this.$emit("click",t,this)},onFocus:function(t){this.$emit("focus",t,this)}}};var I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"autocomplete-list-item",on:{focus:t.onFocus,onBlur:t.onBlur}},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onClick(e)},focus:t.onFocus,blur:t.onBlur}},[i("span",{staticClass:"autocomplete-list-item-icon"}),t._v(" "),i("span",{staticClass:"autocomplete-list-item-label"},[t._t("default")],2)])])},q=[];I._withStripped=!0;var L=S({render:I,staticRenderFns:q},void 0,P,void 0,!1,void 0,void 0,void 0);const O={name:"place-autocomplete-list",components:{PlaceAutocompleteListItem:L},props:{items:{type:Array,default:function(){return[]}},display:{type:String,default:"description"}},methods:{onBlur:function(t,e){this.$emit("item:blur",t,e)},onFocus:function(t,e){this.$emit("item:focus",t,e)},onClick:function(t,e){this.$emit("item:click",t,e)}}};var R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"autocomplete-list-wrapper"},[i("ul",{staticClass:"autocomplete-list"},t._l(t.items,function(e,n){return i("place-autocomplete-list-item",{key:e.id,attrs:{item:e},on:{click:t.onClick,focus:t.onFocus,blur:t.onBlur}},[t._v("\n            "+t._s(e[t.display])+"\n        ")])}))])},T=[];R._withStripped=!0;var N=S({render:R,staticRenderFns:T},void 0,O,void 0,!1,void 0,void 0,void 0),j={computed:{colorableClasses(){const t={};for(let e in this.$attrs)e.match(/^bg|text|border|bg-gradient-/)&&(t[e]=!0);return t}}};const z="is-empty";var H={inheritAttrs:!1,mixins:[j,{methods:{mergeClasses(){let t={};return c([].slice.call(arguments),i=>{o(i)?e(t):n(i)?t=t.concat(i):i&&(t[i]=!0)}),t}}}],props:{activity:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},label:[Number,String],value:{default:null},group:{type:Boolean,value:!0},error:String,errors:{type:Object,default(){return{}}},feedback:[String,Array],bindEvents:{type:Array,default(){return["focus","blur","change","click","keyup","keydown","progress","paste"]}},defaultControlClass:{type:String,default:"form-control"},hideLabel:Boolean,invalid:Boolean,valid:Boolean,spacing:String,size:{type:String,default:"md",validate:t=>-1!==["sm","md","lg"].indexOf(t)},inline:Boolean,helpText:[Number,String],maxlength:[Number,String]},directives:{bindEvents:{bind(t,e,i){t.addEventListener("focus",e=>{w(t,i,"has-focus")}),t.addEventListener("blur",e=>{t.classList.contains(z)&&$(t,i,"has-changed");$(t,i,"has-focus")}),t.addEventListener("input",e=>{w(t,i,"has-changed");!d(t.value)||"SELECT"===t.tagName&&t.selectedIndex>-1?$(t,i,z):w(t,i,z)}),c(i.context.bindEvents,e=>{t.addEventListener(e,t=>{i.context.$emit(e,t)})})},inserted(t,e,i){C(t,i)},update(t,e,i){C(t,i)}}},methods:{blur(){this.getInputField()&&this.getInputField().blur()},focus(){this.getInputField()&&this.getInputField().focus()},getInputField(){return this.$el.querySelector(".form-control, input, select, textarea")},getFieldErrors(){let t=this.error||this.errors;return o(this.errors)&&(t=this.errors[this.$attrs.name||this.$attrs.id]),!t||n(t)||o(t)?t:[t]}},computed:{controlAttributes(){return Object.keys(this.$attrs).concat([["class",this.controlClasses]]).reduce((t,e)=>{n(e)?t[e[0]]=e[1]:t[e]=this[e]||this.$attrs[e];return t},{})},controlClass(){return this.custom?this.customControlClass:this.defaultControlClass+(this.plaintext?"-plaintext":"")},controlSizeClass(){return x(this.size,this.controlClass)},customControlClass(){return"custom-control"},formGroupClasses(){const t=x(this.$options.name,this.custom?"custom":"");return this.mergeClasses(t,x(this.size,t),{"has-activity":this.activity,"is-valid":!(!this.valid&&!this.validFeedback),"is-invalid":!(!this.invalid&&!this.invalidFeedback)})},controlClasses(){return this.mergeClasses(this.controlClass,this.colorableClasses,this.controlSizeClass,this.spacing||"",this.valid||this.validFeedback?"is-valid":"",this.invalid||this.invalidFeedback?"is-invalid":"")},hasDefaultSlot(){return!!this.$slots.default},invalidFeedback(){const t=this.getFieldErrors();return this.error||(n(t)?t.join("<br>"):t)},validFeedback(){return n(this.feedback)?this.feedback.join("<br>"):this.feedback}}};const K={name:"form-group"};var D=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"form-group"},[t._t("default")],2)},V=[];D._withStripped=!0;var W=S({render:D,staticRenderFns:V},void 0,K,void 0,!1,void 0,void 0,void 0),G={props:{srOnly:Boolean,srOnlyFocusable:Boolean},computed:{screenreaderClasses(){return{"sr-only":this.srOnly,"sr-only-focusable":this.srOnlyFocusable}}}};const M={name:"help-text",mixins:[j,G],computed:{classes(){return e({},this.screenreaderClasses,this.colorableClasses)}}};var U=function(){var t=this,e=t.$createElement;return(t._self._c||e)("small",{staticClass:"form-text",class:t.classes},[t._t("default")],2)},X=[];U._withStripped=!0;var Z=S({render:U,staticRenderFns:X},void 0,M,void 0,!1,void 0,void 0,void 0);const J={name:"form-label",mixins:[j,G],computed:{classes(){return e({},this.screenreaderClasses,this.colorableClasses)}}};var Q=function(){var t=this,e=t.$createElement;return(t._self._c||e)("label",{class:t.classes},[t._t("default")],2)},Y=[];Q._withStripped=!0;var tt=S({render:Q,staticRenderFns:Y},void 0,J,void 0,!1,void 0,void 0,void 0);const et={name:"form-control",mixins:[j,H],props:{element:{type:String,required:!0}}};var it=function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.element,t._b({tag:"component",attrs:{"aria-label":t.label||t.name||t.id,"aria-describedby":t.id||t.name},on:{input:function(e){t.$emit("input",e.target.value)}},model:{value:t.testValue,callback:function(e){t.testValue=e},expression:"testValue"}},"component",t.$attrs,!1),[t._t("default")],2)},nt=[];it._withStripped=!0;var ot=S({render:it,staticRenderFns:nt},void 0,et,void 0,!1,void 0,void 0,void 0);const rt={name:"form-feedback",mixins:[j],props:{label:String,invalid:Boolean,valid:Boolean}};var st=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:{"invalid-feedback":t.invalid,"valid-feedback":t.valid&&!t.invalid}},[t._t("default",[t._v(t._s(t.label))])],2)},at=[];st._withStripped=!0;var ct=S({render:st,staticRenderFns:at},void 0,rt,void 0,!1,void 0,void 0,void 0);const lt={props:{nodes:{type:Number,default:3},size:{type:String,default:""},prefix:{type:String,default:"activity-indicator-"}},computed:{classes:function(){const t={};return t[this.$options.name]=!!this.$options.name,t[this.prefix+this.size.replace(this.prefix,"")]=!!this.size,t}}};var ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-indicator",class:t.classes},t._l(t.nodes,function(t){return i("div")}))},dt=[];ut._withStripped=!0;var ft=S({render:ut,staticRenderFns:dt},void 0,lt,void 0,!1,void 0,void 0,void 0);var pt=S({},void 0,{name:"activity-indicator-dots",extends:ft},void 0,void 0,void 0,void 0,void 0);var mt=S({},void 0,{name:"activity-indicator-spinner",extends:ft,props:e({},ft.props,Number)},void 0,void 0,void 0,void 0,void 0);const vt={name:"activity-indicator",extends:ft,props:{center:Boolean,fixed:Boolean,label:String,relative:Boolean,type:{type:String,default:"dots"},height:[String,Number],maxHeight:[String,Number],minHeight:[String,Number],width:[String,Number],maxWidth:[String,Number],minWidth:[String,Number]},components:{ActivityIndicatorDots:pt,ActivityIndicatorSpinner:mt},computed:{style(){return{width:E(this.width),maxWidth:E(this.maxWidth),minWidth:E(this.minWidth),height:E(this.height),maxHeight:E(this.maxHeight),minHeight:E(this.minHeight)}},component(){return f(this.prefix+this.type.replace(this.prefix,""))}}};var ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.center?i("div",{staticClass:"center-wrapper",class:{"position-relative":t.relative,"position-fixed":t.fixed},style:t.style},[i("div",{staticClass:"center-content d-flex flex-column align-items-center"},[i(t.component,{tag:"component",attrs:{size:t.size,prefix:t.prefix}}),t._v(" "),t.label?i("div",{staticClass:"activity-indicator-label",domProps:{innerHTML:t._s(t.label)}}):t._e()],1)]):i("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",style:t.style},[i(t.component,{tag:"component",attrs:{size:t.size,prefix:t.prefix}}),t._v(" "),t.label?i("div",{staticClass:"activity-indicator-label",domProps:{innerHTML:t._s(t.label)}}):t._e()],1)},yt=[];ht._withStripped=!0;var bt=S({render:ht,staticRenderFns:yt},void 0,vt,void 0,!1,void 0,void 0,void 0);const gt={name:"input-field",mixins:[j,H],components:{HelpText:Z,FormControl:ot,FormGroup:W,FormLabel:tt,FormFeedback:ct,ActivityIndicator:bt}};var _t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form-group",{class:t.formGroupClasses},[t._t("label",[t.label||t.hasDefaultSlot?i("form-label",{ref:"label",attrs:{for:t.$attrs.id},domProps:{innerHTML:t._s(t.label)}}):t._e()]),t._v(" "),i("div",{staticClass:"form-group-inner"},[t._t("control",[i("input",t._b({directives:[{name:"bind-events",rawName:"v-bind-events"}],domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}},"input",t.controlAttributes,!1))]),t._v(" "),t._t("activity",[i("transition",{attrs:{name:"slide-fade"}},[t.activity?i("activity-indicator",{key:"test",ref:"activity",attrs:{type:"dots",size:t.size}}):t._e()],1)])],2),t._v(" "),t._t("feedback",[t.validFeedback?i("form-feedback",{ref:"feedback",attrs:{valid:""},domProps:{innerHTML:t._s(t.validFeedback)}}):t.invalidFeedback?i("form-feedback",{ref:"feedback",attrs:{invalid:""},domProps:{innerHTML:t._s(t.invalidFeedback)}}):t._e()]),t._v(" "),t._t("help",[t.helpText?i("help-text",{ref:"help",domProps:{innerHTML:t._s(t.helpText)}}):t._e()])],2)},St=[];_t._withStripped=!0;var xt={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,TAB:9},wt=["bounds","location","component-restrictions","offset","radius","types"];const $t={name:"place-autocomplete-field",mixins:[H],components:{FormGroup:W,InputField:S({render:_t,staticRenderFns:St},void 0,gt,void 0,!1,void 0,void 0,void 0),ActivityIndicator:bt,PlaceAutocompleteList:N},props:{apiKey:{type:String,required:!0},baseUri:{type:String,default:"https://maps.googleapis.com/maps/api/js"},componentRestrictions:{type:[Boolean,Object,String],default:!1},custom:Boolean,libraries:{type:Array,default:function(){return["geometry","places"]}},bounds:{type:[Boolean,Object,String],default:!1},location:{type:[Boolean,Object,String],default:!1},offset:{type:Boolean,default:!1},radius:{type:Boolean,default:!1},types:{type:[Boolean,Array],default:!1}},methods:{getInputElement:function(){return this.$el.querySelector("input")},getRequestOptions:function(){var t={input:this.getInputElement().value};for(var e in wt)void 0===this[e]&&null===this[e]||(t[e]=this[e]);return t},select:function(t){var e=this;y({placeId:t.place_id}).then(function(i){e.hide(),e.$emit("input",e.query=i[0].formatted_address),e.$emit("select",t,i[0])})},search:function(){var t=this;return new Promise(function(e,i){t.getInputElement().value?(t.showActivityIndicator=!0,t.$service.getPlacePredictions(t.getRequestOptions(),function(n,o){switch(t.showActivityIndicator=!1,o){case window.google.maps.places.PlacesServiceStatus.OK:e(n);break;default:i(new Error("Error with status: ".concat(o)))}})):(t.predictions=!1,t.showPredictions=!1)})},hide:function(){this.showPredictions=!1},show:function(){this.showPredictions=!0},up:function(){var t=this.$el.querySelector("a:focus");if(t&&t.parentElement.previousElementSibling)t.parentElement.previousElementSibling.querySelector("a").focus();else{var e=this.$el.querySelectorAll("a");e[e.length-1].focus()}},down:function(){var t=this.$el.querySelector("a:focus");t&&t.parentElement.nextElementSibling?t.parentElement.nextElementSibling.querySelector("a").focus():this.$el.querySelector("a").focus()},onKeydown:function(t){var e=this.$el.querySelector("[tabindex]");e&&t.keyCode===xt.TAB&&t.preventDefault()&&e.focus()},onKeyup:function(t){var e=this;switch(t.keyCode){case xt.ENTER:case xt.SPACE:return void(this.$el.querySelector(".is-focused")&&this.$el.querySelector(".is-focused a").dispatchEvent(new Event("mousedown")));case xt.ESC:return this.hide(),void this.getInputElement().blur();case xt.UP:return this.up(),void t.preventDefault();case xt.DOWN:return this.down(),void t.preventDefault()}this.search().then(function(t){e.predictions=t,e.showPredictions=!0},function(t){t&&(e.predictions=!1)})},onFocus:function(t){this.query&&(this.predictions.length||this.onKeyup(t),this.show())},onBlur:function(t){this.$el.contains(t.relatedTarget)||this.hide()},onItemBlur:function(t){this.onBlur(t)},onItemClick:function(t,e){this.select(e.item),this.predictions=!1}},mounted:function(){var t=this;_("".concat(this.baseUri,"?key=").concat(this.apiKey,"&libraries=").concat(this.libraries.join(","))).then(function(){t.$geocoder=new window.google.maps.Geocoder,t.$service=new window.google.maps.places.AutocompleteService,t.loaded=!0,t.$emit("loaded")})},data:function(){return{query:this.value,loaded:!1,predictions:!1,showPredictions:!1,showActivityIndicator:!1}}};var Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"autocomplete-field",on:{keydown:t.onKeydown,keyup:t.onKeyup}},[i("input-field",t._b({directives:[{name:"bind-events",rawName:"v-bind-events"}],attrs:{label:t.label,errors:t.errors,value:t.value,custom:t.custom,autocomplete:"no"},on:{blur:t.onBlur,focus:t.onFocus,input:function(e){t.$emit("input",t.query)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},"input-field",t.$attrs,!1),[t.activity?i("activity-indicator",{attrs:{size:"xs",type:"spinner"}}):t._e()],1),t._v(" "),t.predictions&&t.showPredictions?i("place-autocomplete-list",{attrs:{items:t.predictions},on:{"item:click":t.onItemClick,"item:blur":t.onItemBlur}}):t._e()],1)},Et=[];Ct._withStripped=!0;var kt=S({render:Ct,staticRenderFns:Et},void 0,$t,void 0,!1,void 0,void 0,void 0);window&&window.Vue&&window.Vue.use(k),t.PlaceAutofill=B,t.PlaceAutocompleteField=kt,t.PlaceAutocompleteList=N,t.PlaceAutocompleteListItem=L,t.default=k,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vue-place-autocomplete.min.js.map
